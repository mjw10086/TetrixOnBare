# 一个在裸机上运行的俄罗斯方块

这个项目是很大程度上是自制操作系统的皮毛，主要目的是在裸机上运行俄罗斯方块，涉及到操作系统与硬件的基本交互，但是不包含操作系统的核心技术比如进程和内存管理。

本项目按任务分为以下阶段：

- 引导扇区的创建，打印hello world
- 由实模式进入保护模式
- 在裸机运行C语言程序
- 在VGA模式下显示内容
- 实现中断的支持
- Tetris

# 引导扇区的创建，打印hello world

计算机启动后，主板上内置的BIOS程序首先运行，BIOS进行一系列自检后从外部存储设置中检查可引导扇区，如果存在可引导扇区那么将引导扇区加载到内存地址`0x7c00`处，并跳转到该内存地址开始执行。

本节内容需要的知识：
- Intel或者AT&T汇编语言
- 汇编语言编译器和链接器工具的使用
- 理解并使用BIOS中断
- Bochs基本使用
- Makefile的基本使用

## 可引导扇区的结构

可引导扇区主要特征如下：
- 外部存储设备的第一个扇区，也就是0号扇区
- 一个扇区大小为512字节，并且以`0xaa55`为结尾（以0号字节为起始，即510字节为0x55，511字节为0xaa）

## 使用BIOS中断清屏以及打印hello world

使用`int 0x10`来调用BIOS中断打印字符，其参数和功能通过寄存器来传递，详情参见代码文件`boot.asm`。

## Makefile自动化构建以及Bochs调试

Makefile提供构建脚本，注意`boot.asm`汇编的链接参数，`-Ttext=0x7c00`表示程序装在到内存的位置，`--oformat binary`表示生成数据的原始二进制Blob，而不是elf格式。

在Bochs中则指定了BIOS和VGABIOS，并且设置机器的物理内存大小和机器的外接存储设备。
